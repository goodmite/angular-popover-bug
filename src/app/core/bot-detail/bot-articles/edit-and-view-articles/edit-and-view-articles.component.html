<header>
    <div class="d-flex flex-row heading align-items-center pb-3">
        <div class="heading-title">
            <i class="fa fa-angle-left cursor-pointer p-1" (click)="goBackToArticle()"></i>
            {{articleData.questions[0].substr(0, 80)}}{{articleData.questions[0].length > 80 ? " . . .":""}}</div>
        <div class="mr-auto">
        </div>
        <!-- <button mat-flat-button color="primary" style="border-radius: 2px; line-height: 0px">
            <mat-icon>refresh</mat-icon> Save and train
        </button> -->
        <button class="btn-theme btn-theme-primary mat-theme-button mat-theme-button-border cursor-pointer mr-2"
            mat-button style="border: 1px solid #e0e0e0;padding: 0 8px; border-radius: 2px; "
            (click) = "updateAndTrain()">
            <mat-icon>refresh</mat-icon>
            Save and train
        </button>
        <button class="mat-theme-button cursor-pointer mr-2" mat-button
            (click) = "updateArticleClicked()"
            style="border: 1px solid #e0e0e0;padding: 0 8px; border-radius: 2px;">
            <mat-icon>save</mat-icon>
            Save
        </button>
        <button class="mat-theme-button cursor-pointer mr-2" mat-button
            (click)="deleteArticle()"
            style="border: 1px solid #e0e0e0;padding: 0 8px; border-radius: 2px; ">
            <mat-icon>delete</mat-icon>
            Delete
        </button>
        <!-- <button mat-stroked-button style="border-radius: 2px; line-height: 0px">
            <mat-icon>save</mat-icon> Save
        </button>
        <button mat-stroked-button style="border-radius: 2px; line-height: 0px">
            <mat-icon>delete</mat-icon> Delete
        </button> -->
    </div>

</header>

<div class="category-edit px-2 pb-2">
    <div class="category-lable px-2 ">Category</div>
    <div class="category-name curser-pointer px-2">{{articleData.category_id | categoryIdToName : category_mapping}}
    </div>
</div>

<div class="main-block p-2">
    <div class="questions-list px-2">
        <div class="questions-heading">Questions</div>
        <mat-form-field class="question-list-item"
            *ngFor="let question of articleData.questions; let index = index;trackBy:trackByIndex;">
            <textarea matInput required
                name=a{{index}} 
                type="text" 
                [(ngModel)]="articleData.questions[index]"
                #autosize="cdkTextareaAutosize" 
                cdkTextareaAutosize
                cdkAutosizeMinRows="1" 
                cdkAutosizeMaxRows="3">
            </textarea>
            <!-- <input matInput name=a{{index}} type="text" [(ngModel)]="articleData.questions[index]"> -->
            <mat-icon matSuffix class="onParentHover cursor-pointer" (click)="deleteQustionWithId(index)">close
            </mat-icon>
        </mat-form-field>
        <button class="mat-theme-button cursor-pointer mr-2" mat-button
            style="border: 1px solid #e0e0e0;padding: 0 8px; border-radius: 2px; width: max-content;"
            (click)="addNewQuestion()">
            + Add question 
        </button>
        <!-- <div *ngFor="let question of articleData.questions">{{question}}</div> -->
    </div>
    <div class="response">
        <div class="response-heading">Response</div>
        <div class="response-items px-2">
            <mat-form-field class="question-list-item w-100"
            appearance="outline"
            color = basic
            *ngFor="let answer of articleData.answers; let index = index;trackBy:trackByIndex;">
            <textarea matInput 
                name=a{{index}} 
                type="text" 
                [(ngModel)]="articleData.answers[index].text[0]"
                #autosize="cdkTextareaAutosize" 
                cdkTextareaAutosize
                cdkAutosizeMinRows="20" 
                cdkAutosizeMaxRows="20">
            </textarea>
            <!-- <input matInput name=a{{index}} type="text" [(ngModel)]="articleData.questions[index]"> -->

        </mat-form-field>
            <!-- <div *ngFor="let answer of articleData.answers">
                {{answer.text}}
            </div> -->
        </div>
        <i>{{articleData.questions | json}}</i>
        <hr>
        <i>{{articleData.answers | json}}</i>
    </div>

</div>