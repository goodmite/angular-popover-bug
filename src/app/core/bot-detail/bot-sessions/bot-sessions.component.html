<div class="d-flex" style="margin-top: 10px">
    <form *ngIf="showFilterForm" #form="ngForm" class="refine-results"
          style="background-color: white; width: 250px; flex-basis: 250px; flex-shrink: 0; border: 1px solid #e0e0e0; align-self: flex-start">
        <strong>Refine Results</strong>
        <hr style="margin: 10px -16px;">
        <mat-form-field class="example-full-width">
            <input matInput placeholder="Room Id"
                   ngModel
                   type="number"
                   name="id">
        </mat-form-field>
        <mat-form-field class="example-full-width">
            <input matInput placeholder="Consumer Id"
                   ngModel
                   type="number"
                   name="consumer_id">
        </mat-form-field>


        <div>Message</div>
        <div class="d-flex justify-content-between">
            <mat-form-field class="example-full-width input-no-label" style="width: 40%" floatLabel="never">
                <input matInput placeholder="min" type="number"
                       ngModel
                       name="consumer_id">
            </mat-form-field>
            <span style="align-self: center; margin-bottom: 10px">to</span>
            <mat-form-field class="example-full-width input-no-label" style="width: 40%" floatLabel="never">
                <input matInput placeholder="max" type="number"
                       ngModel
                       name="total_message_count">
            </mat-form-field>
        </div>

        <div>Channel</div>
        <ul style="display: flex; flex-wrap: wrap" ngModelGroup="channels">
            <li *ngFor="let channel of channels" style="margin-top: 14px">
                <mat-checkbox *ngIf="channel.integration_type=== 'channels'" color="primary" ngModel
                              name="{{channel.unique_name}}" [title]="channel.unique_name">
                    <img style="border-radius: 50%; width: 20px; height: 20px; margin-left: 2px"
                         [src]="channel.icon" [alt]="channel.unique_name">
                </mat-checkbox>
            </li>
        </ul>

        <mat-form-field floatLabel="never">
            <input matInput
                   name="updated_at"
                   ngModel
                   placeholder="Last Updated"
                   [satDatepicker]="picker">
            <sat-datepicker #picker [rangeMode]="true"></sat-datepicker>
            <sat-datepicker-toggle matSuffix [for]="picker"></sat-datepicker-toggle>
        </mat-form-field>

        <ul>Room metadata
            <li>
                <mat-checkbox name="sendtoagent" ngModel color="primary">Agent handover happened</mat-checkbox>
            </li>
            <li>
                <mat-checkbox name="error" ngModel color="primary">Error occured</mat-checkbox>
            </li>
            <li>
                <mat-checkbox name="feedback" ngModel color="primary">Downvoted</mat-checkbox>
            </li>
        </ul>

        <div class="d-flex justify-content-between mt-2">
            <button mat-flat-button class="mat-theme-button"
                    style="border-radius: 2px"
                    color="primary" type="button" (click)="sessionFormSubmitted(form.value)">Submit
            </button>
            <button mat-button style="border: 1px solid #e0e0e0; border-radius: 2px" class="mat-theme-button"
                    (click)="resetSearchForm(form)">Clear
            </button>
        </div>
    </form>
<!---->

    <app-smart-table [data]="tableData"
                     *ngIf="tableData"
                     style="flex-grow: 1"
                     [totalRecords]="totalSessionRecords"
                     (customActionEvents)="customActionEventsTriggeredInSessionsTable($event)"
                     (rowClicked$)="sessionTableRowClicked($event, sessionDetailTemplate)"
                     [showSearchInDbButton]="true"
                     [showRefreshButton]="true"
                     (refreshData$)="performSearchInDbForSession($event)"
                     (performSearchInDB$)="performSearchInDbForSession($event)">
        <div *ngIf="bot.advanced_data_protection" style="border: 1px solid #e0e0e0; align-self: flex-end;padding: 0px 10px;margin-left: 10px;">
            <i class="fa fa-lock" style="color: orange"></i>
            All the sessions are encrypted, use the decryption key to view individual session of interest
        </div>
    </app-smart-table>
</div>


<app-splash-screen *ngIf="showSplashScreen && !showLoader"
                   [imageHRef]="myESplashScreens.sessions"
                   [headingText]="'No sessions found'"
                   [descriptionText]="'Integrate or deploy your bot to see all conversations bot was involved in'"
                   class="d-flex justify-content-center align-items-center"
                   style="position: absolute; left: 0; right: 0;bottom: 0; top: 0;z-index: -1"
></app-splash-screen>

<app-imi-loader *ngIf="showLoader "></app-imi-loader>


<ng-template #sessionDetailTemplate>
    <!--<div class="row" style="width: 100%">-->
    <!--<div class="col-12">-->
    <app-session-detail-model
            [session]="selectedRow_Session"
            [bot]="bot"
            (selectNextRow)="selectNextRow()"
            (closeModel$)="dialogRefWrapper.ref.close()"
            (selectPrevRow)="selectPrevRow()"
            [pageNumberOfCurrentRowSelected]="pageNumberOfCurrentRowSelected"
            [indexOfCurrentRowSelected]="indexOfCurrentRowSelected"
            [finalDfState]="selectedRow_Session.df_state"
            (refreshSession$)="updateSessionById($event)"
            [sessionDataStore]="selectedRow_Session.data_store">
    </app-session-detail-model>
</ng-template>
<!---->
