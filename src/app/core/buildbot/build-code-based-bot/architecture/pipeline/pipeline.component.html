<!--<div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">-->
  <!--<div class="example-box" *ngFor="let movie of movies" cdkDrag>{{movie}}</div>-->
<!--</div>-->


<!--<i>{{pipeLine |json}}</i>-->
<div class="row m-0" style="height: 100%;">

  <div class="col-8" style="height:90%;overflow-y: scroll">
    <div  style="height: 10%" class="mb-1 border1 d-flex p-0 justify-content-between">
      <p class="text-theme-secondary my-2">Drag and drop modules from 'Available Intelligence Modules' to 'Bot
        Intelligence
        Pipeline' and vice versa</p>
      <div class="search-theme-input-with-search col-4">
        <span class="fa fa-search"></span>
        <input type="search" placeholder="Filter Modules" [(ngModel)]="searchKeyword" class="border">
      </div>
    </div>
    <h4 class="heading mb-2 mt-3">Available Intelligence Modules({{aiModules && aiModules.length}})</h4>
    <mat-accordion>
      <mat-expansion-panel *ngFor="let pipelineItem of pipelineModulesV2List" class="mat-elevation-z0">
        <mat-expansion-panel-header >
          <mat-panel-title>
            {{pipelineItem.display_values}}
          </mat-panel-title>
          <mat-panel-description>
            Type your name and age
          </mat-panel-description>
        </mat-expansion-panel-header>

        <app-simple-table [tableData]="pipelineItem"></app-simple-table>

      </mat-expansion-panel>

    </mat-accordion>
  </div>
  <div class="col-4 pipeline-wrapper d-flex flex-column" style="height: 90%;overflow-y: auto">

    <h4 class="heading mb-2 mt-3">Bot Intelligence Pipeline ({{pipeLine && pipeLine.length}})</h4>
    <div class="flex-grow-1" [dragula]='"first-bag"' [(dragulaModel)]='pipeLine'>
      <!--<div cdkDropList class="example-list" (cdkDropListDropped)="drop($event)">-->
        <!--<div class="example-box" *ngFor="let aiModule of pipeLine;let targetIndexNew = index" cdkDrag>{{aiModule.unique_name}}</div>-->
      <!--</div>-->
      <div *ngFor="let aiModule of pipeLine;let targetIndexNew = index"
           cdkDropList (cdkDropListDropped)="drop($event)">
        <div class="border mr-3 module-box border-danger">
          <i class="fa fa-arrows-alt"></i>
          <span>{{aiModule.unique_name}}</span>
          <i class="fa fa-cog"></i>
          <i class="fa fa-trash"></i>

          <!--<div>-->
            <!--<i *ngIf=" aiModule && aiModule.input_params && myObject.keys(aiModule.input_params).length>0"-->
               <!--(click)="openCreateBotModal(Primarytemplat,aiModule);"-->
               <!--class="fa fa-cog pl-1" aria-hidden="true"></i>-->
          <!--</div>-->
        </div>
      </div>
    </div>
  </div>
  <!--</div>-->
</div>

<ng-template #Primarytemplat>
  <div class="primary-modal">
    <div class="modal-header">
      <h4 class="modal-title" style="display: flex;justify-content: start;">{{selectedPipeline.unique_name}}</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="dialogRefWrapper.ref.close()">
        <span aria-hidden="true">&times;</span>
      </button>

    </div>

    <div class="modal-body pt-0">
      <form ngNativeValidate class=" align-items-center" #Pipelineform="ngForm">

        <div *ngFor="let Key of myObject.keys(selectedPipeline.display_values)"
             class="d-flex align-items-center justify-content-center my-2">

          <div class="form-group m-0 d-flex w-100 align-items-center justify-content-center" *ngIf="selectedPipeline.display_values[Key].type == 'dropdown'">
            <label class="mb-0  w-50 " style="text-align: left;">{{selectedPipeline.display_values[Key].display_value}}</label>
            <select class="w-50" style= "color: #474747;"
              [ngModel]="selectedPipeline.input_params[Key] || selectedPipeline.display_values[Key].default"
              name="{{Key}}">
              <option *ngFor="let dropi of selectedPipeline.display_values[Key].content"
                      type="button" [value]="dropi">{{dropi}}
              </option>
            </select>
          </div>
          <div class="form-group m-0 d-flex w-100 align-items-center justify-content-center" *ngIf="selectedPipeline.display_values[Key].type == 'text'">
            <label class="mb-0 w-50" style="text-align: left;">{{selectedPipeline.display_values[Key].display_value}}</label>
            <input type="text" class="input-material flex-grow-1 w-50" style= "color: #474747;"
                   [ngModel]="selectedPipeline.input_params[Key]"
                   name="{{Key}}">
          </div>

        </div>
        <button class="btn-theme btn-theme-success-sm" (click)="submitPipeline(Pipelineform); dialogRefWrapper.ref.close()">Submit
        </button>
      </form>


    </div>
  </div>
</ng-template>
