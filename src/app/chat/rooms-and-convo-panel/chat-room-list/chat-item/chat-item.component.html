<div class="row position-relative"
     style="border-bottom: 1px solid rgba(0, 0, 0, 0.24)"
     data-cy="chat-room"
     [ngClass]="{'bg-theme-primary-v2':currentRoomId === room.id}">
  <div class="col-12 p-1 text-left message-wrapper">
    <div class="message p-2 cursor-pointer" (click)="openChatRoom()">
      <div class="d-flex">
        <div class="message-text ">Room ID: {{room.id}}</div>
        <div class="d-flex ml-auto mr-1">
          <span class="fa fa-user"
             style="color: #9e9e9e"
             (click)="toggleOverlay(showOverlay, $event)"
             [class.active]="showOverlay"
             #overlayOriginFullScreen="cdkOverlayOrigin"
             cdkOverlayOrigin
          ></span>
        </div>
        <div class="time">{{room.messageList[room.messageList.length-1].time|msToHhmm}}</div>
      </div>
      <div class="message-text limit-oneline mt-1">
        <span>{{room.messageList[room.messageList.length-1].sourceType==='human'?'You':'Bot'}}:</span>
        {{room.messageList[room.messageList.length-1].text}}
      </div>

      <!--consumer detail dropdown starts-->


      <app-overlay
        [overlayOrigin]="overlayOriginFullScreen"
        [showOverlay]="showOverlay"
        [overlayClass]="'bg-transparent'"
        (backdropClick$)="showOverlay = false">
        <div class="dialog-container p-2"  (clickOutside)="showOverlay=false">
          <div class="" *ngFor="let key of myObject.keys(room.consumerDetails)" >
            <div class="p-2" *ngIf="room.consumerDetails[key]" style="min-width: 150px">
              <strong class="mr-1">{{key|titlecase}}:</strong>
              <span>{{room.consumerDetails[key]}}</span>
            </div>
          </div>
        </div>
      </app-overlay>
      <!--consumer detail dropdown starts-->

    </div>
  </div>
</div>

