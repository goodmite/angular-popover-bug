<!--<p>{{bot|json}}</p>-->

<div class="row-bot-detail-header d-flex align-items-center my-1">
  <img style="width: 32px;height: 32px" class="rounded-circle" [src]="bot.logo" alt="">
  <div class="name">
    <div class="heading mb-0">{{bot.name}}</div>
  </div>
  <i class="fa fa-users" *ngIf="bot && bot.is_manager" style="font-size: 16px"></i>
  <div class="d-flex align-items-center">
    <i class="fa fa-circle dark-green"></i>
    <div>Active(v{{bot.active_version.version}})</div>
  </div>
  <div class="text-theme-normal mr-3 d-none d-md-block">
    <span class="text-muted">Created by :</span>{{bot.created_by}} <span class="text-muted">on</span>{{bot.created_at|date}}
  </div>
  <div class="text-theme-normal d-none d-lg-block">
    <span class="text-muted">Last Updated By :</span>{{bot.updated_by}} <span class="text-muted">on</span>{{bot.updated_at|date}}
  </div>
  <!--<div class="active-button px-1 border-right d-flex justify-content-center align-items-center">-->
  <!--Active({{bot.active_version_id}})-->
  <!--</div>-->
  <div class="ml-auto"></div>
  <!--<img *ngFor="let keys of myObject.keys(bot.integrations)" style="width: 28px;height: 28px"-->
  <!--src="http://www.pngmart.com/files/3/Weather-PNG-HD.png" alt="">-->

  <!--<img *ngFor="let integrationsMasterListItem of ((bot.integrations|integrationLogos|async))"-->
  <!--[src]="integrationsMasterListItem?.icon"-->
  <!--class="logo-image"-->
  <!--style="width: 18px;height: 18px"-->
  <!--alt="">-->


  <span *myIf="myEAllActions['Get Integrations']">
    <img *ngFor="let integrationsMasterListItem of ((bot.integrations|integrationLogos:'only_channel'|async))"
         [src]="integrationsMasterListItem?.icon"
         class="logo-image " style="width: 16px;height: 16px" alt="">
    <img id="id" *ngFor="let integrationsMasterListItem of ((bot.integrations|integrationLogos:'no_channel'|async))"
         [src]="integrationsMasterListItem?.icon" class="logo-image " style="width: 16px;height: 16px" alt="">
  </span>
  <span *ngIf="myObject.keys(bot.integrations).length>4" class="more">
    +{{myObject.keys(bot.integrations).length-4}} More
  </span>
  <div class="headerDivider mx-2"></div>
  <div *myIf="myEAllActions['Send API']">
    <div class="d-flex preview-box align-items-center" (click)="openBot()" *ngIf="bot.bot_type === 'chatbot'">
      <i class="fa fa-comment-o cursor-pointer" style="font-size: 15px"></i>
      <span class="action">Preview</span>
    </div>
  </div>

  <div *myIf="myEAllActions['Update Bots']" class="d-flex preview-box align-items-center"
       (click)="refreshBotDetails()">
    <i class="fa fa-refresh cursor-pointer" style="font-size: 15px" [ngClass]="{'fa-spin':showSpinIcon}"></i>
    <span class="action">Cancel</span>
    <!---->
  </div>
  <button class="btn btn-theme-primary" (click)="openActiveBotChangedModal(activeVersionChangedTemplate)"
          *myIf="myEAllActions['Update Bots']">Update Bot
  </button>
  <div class="btn-group p-2" dropdown placement="top left">
    <i dropdownToggle class="fa fa-ellipsis-v cursor-pointer p-1" style="font-size: 20px"></i>
    <ul *dropdownMenu class="dropdown-menu" role="menu">
      <li role="menuitem">
        <a class="dropdown-item cursor-pointer" (click)="utilityService.copyToClipboard(bot.bot_access_token)">Copy
          Access Token</a>
      </li>
      <li role="menuitem">
        <a class="dropdown-item cursor-pointer" (click)="utilityService.copyToClipboard(bot.enterprise_id)">Copy
          Enterprise ID</a>
      </li>
      <!--<li role="menuitem">-->
      <!--<a class="dropdown-item">Make Bot Active</a>-->
      <!--</li>-->
      <li role="menuitem" *myIf="myEAllActions['Delete Bots']">
        <a class="dropdown-item cursor-pointer" (click)="openModal(template)">Delete</a>
      </li>
    </ul>
  </div>

</div>

<!-- <ng-template #template>
  <div class="modal-header bg-danger">
    <h4 class="modal-title heading pull-left text-white">Delete: <strong>{{bot.name }}</strong> ?</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true" class="text-white">&times;</span>
    </button>
  </div>
  <div class="modal-body bg-white text-dark">
    <p class="mb-3">Do you confirm the Deletion? This is a permanent and irreversible change</p>
    <button class="btn btn-theme-secondary-outline mr-2" (click)="modalRef.hide()">Cancel</button>
    <button class="btn btn-theme-danger" (click)="deleteBot()">Delete</button>
  </div>
</ng-template> -->

<ng-template #template>
  <div class="danger-modal center-modal">
    <div class="top-dec"></div>
    <div class="modal-header">
      <h4 class="modal-title mb-2" style="display: flex;justify-content: start;">Delete bot&nbsp;{{ bot.name}}&nbsp;
        ?</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body pt-0">
      <form #form="ngForm">
        <div class="text-center my-1">
          <p class="mb-3">Do you confirm the Deletion? This is a permanent and irreversible change</p>

        </div>
        <button class="btn btn-theme-secondary-outline mr-2" (click)="modalRef.hide()">Cancel</button>
        <button class=" btn btn-theme-danger" (click)="deleteBot()">Delete</button>
      </form>
    </div>
  </div>
</ng-template>


<ng-template #activeVersionChangedTemplate>
  <div class="danger-modal">
    <div class="top-dec"></div>
    <div class="modal-header">
      <h4 class="modal-title mb-2" style="display: flex;justify-content: start;">Active version changed</h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div class="modal-body pt-0">
      <form #form="ngForm">
        <div class="text-center my-1">
          <p class="mb-3">If you update the bot your currently selected version will be the new Active version.</p>

        </div>
        <button class="btn btn-theme-secondary-outline mr-2" (click)="modalRef.hide()">Cancel</button>
        <button class=" btn btn-theme-danger" (click)="updateBot()">Update</button>
      </form>
    </div>
  </div>
</ng-template>

