<div class="card bot-creation-form" style="border-radius: 0">
  <ng-container *appMyIf="[myEAllActions['Update Bots']]">
      <app-button-wrapper
        *loadify="{partialPath:'api/v1/bot/', successClassDuration: 2000, method: ['put']}; let statusChanged$=statusChanged$"
        class="card--update"
        [isMatFlatButton]="false"
        [status]="(statusChanged$|async)?.loadify_status"
        [text]="'Update Bot'"
        [icon]="'refresh'"
        (btnClick)="updateBotHandler()">
      </app-button-wrapper>
  </ng-container>
    <mat-tab-group [selectedIndex]="selectedTabIndex" (selectedIndexChange)="selectedTabIndex = $event" animationDuration="0ms">
        <mat-tab>
            <ng-template mat-tab-label>
                <span [ngStyle]="{'color': !basicInfoForm.valid && basicInfoForm.status !== 'DISABLED'? 'red':'#474747'}">Profile</span>
                <mat-icon style="color: red;font-size: 100%;" *ngIf="!basicInfoForm.valid && basicInfoForm.status !== 'DISABLED'" class="example-tab-icon">highlight_off</mat-icon>
            </ng-template>
            <app-basic-info-form [botId]="bot?.id" [formGroup]="basicInfoForm"></app-basic-info-form>
        </mat-tab>
        <mat-tab *ngIf="!(bot_type===myEBotType.intelligent)">
            <ng-template mat-tab-label>
                <span [ngStyle]="{'color': !dataManagementForm.valid && dataManagementForm.status !== 'DISABLED'?'red':'#474747'}">Management</span>
                <mat-icon style="color: red;font-size: 100%;" *ngIf="!dataManagementForm.valid && dataManagementForm.status !== 'DISABLED'" class="example-tab-icon">highlight_off</mat-icon>
            </ng-template>
            <app-data-manage-form [formGroup]="dataManagementForm"></app-data-manage-form>

        </mat-tab>
        <mat-tab *ngIf="!(bot_type===myEBotType.intelligent)">
            <ng-template mat-tab-label>
                <span [ngStyle]="{'color': !securityForm.valid && securityForm.status !== 'DISABLED'?'red':'#474747'}">Security</span>
                <mat-icon style="color: red;font-size: 100%;" *ngIf="!securityForm.valid && securityForm.status !== 'DISABLED'" class="example-tab-icon">highlight_off</mat-icon>
            </ng-template>
            <app-security [formGroup]="securityForm"></app-security>
        </mat-tab>
        <!-- failed appempt on making forms -->
        <mat-tab *ngIf="(bot_type===myEBotType.faqbot)">
            <ng-template mat-tab-label>
                <span [ngStyle]="{'color': !faqHandoverANdInterfaceForm.valid && faqHandoverANdInterfaceForm.status !== 'DISABLED'?'red':'#474747'}">Handover and Inference</span>
                <mat-icon style="color: red;font-size: 100%;" *ngIf="!faqHandoverANdInterfaceForm.valid && faqHandoverANdInterfaceForm.status !== 'DISABLED'" class="example-tab-icon">highlight_off</mat-icon>
            </ng-template>
            <app-faq-handover-and-interface-form [formGroup]="faqHandoverANdInterfaceForm"
                                                 [disableAgentToggleBAD]="disableAgentToggleBAD"
                                                 [bot]="bot"></app-faq-handover-and-interface-form>
        </mat-tab>
      <mat-tab *ngIf="(bot_type===myEBotType.mlbot)">
        <ng-template mat-tab-label>
          <span [ngStyle]="{'color': !mlHandoverANdInterfaceForm.valid && mlHandoverANdInterfaceForm.status !== 'DISABLED'?'red':'#474747'}">Handover and Inference</span>
          <mat-icon style="color: red;font-size: 100%;" *ngIf="!mlHandoverANdInterfaceForm.valid && mlHandoverANdInterfaceForm.status !== 'DISABLED'" class="example-tab-icon">highlight_off</mat-icon>
        </ng-template>
        <app-faq-handover-and-interface-form [formGroup]="mlHandoverANdInterfaceForm"
                                             [disableAgentToggleBAD]="disableAgentToggleBAD"
                                             [bot]="bot"></app-faq-handover-and-interface-form>
      </mat-tab>

        <ng-container *appMyIf="[myEAllActions['Get Integrations']]">
            <mat-tab *ngIf="!(bot_type===myEBotType.intelligent)">
                <ng-template mat-tab-label>
                    <span [ngStyle]="{'color': !integrationForm?.valid?'red':'#474747'}">Integrations</span>
                    <mat-icon style="color: red;font-size: 100%;" *ngIf="!integrationForm?.valid"
                              class="example-tab-icon">highlight_off
                    </mat-icon>
                </ng-template>
                <!--TODO: convert integration forms to reactive forms in future-->
                <app-integration-option-list
                        (form$)="integrationFormInit($event)"
                        [bot]="bot"></app-integration-option-list>
            </mat-tab>
        </ng-container>

      <ng-container>
        <mat-tab>
          <ng-template mat-tab-label>
            <span style="margin-right: 6px">Style</span>
            <span *loadify="{partialPath:'api/v1'}; let statusChanged$=statusChanged$">
              <mat-spinner *ngIf="(statusChanged$|async)?.loading" [diameter]="15"></mat-spinner>
            </span>
            <mat-icon style="color: red;font-size: 100%;" *ngIf="!integrationForm?.valid"
                      class="example-tab-icon">highlight_off
            </mat-icon>
          </ng-template>
          <app-style-config></app-style-config>
        </mat-tab>
      </ng-container>
    </mat-tab-group>

</div>
