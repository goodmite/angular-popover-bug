<!--TODO: why is this form so complex? Because data is coming from backend in different format-->

<form class="grid-integrations form-theme" style="width: 100%; overflow-y: auto" #form_new="ngForm">
  <div
    *ngIf="bot?.bot_disabled_settings?.bot_disabled"
    style="border: 1px solid #e0e0e0; align-self: flex-end; height: 28px;
    margin-bottom: 10px;
    padding-left: 10px;
    background-color: #ffffff;
    border-left: 5px solid orange;
    display: flex;align-items: center;
">
    <i class="fa fa-pause-circle-o" style="color: orange; margin-right: 5px"></i>
    Bot is disabled currently, all the integrations which are configured for the bot will only show the disabled bot message and allow handover if it is configured.
  </div>
  <div *ngFor="let integration_type of integration_types"
       ngModelGroup="{{integration_type}}">
    <!--integration_type: fulfillment_provider_details, channels-->
    <div class="grid-integration-groups" *ngFor="let type of integration_type|typeForIntegrationType">
      <div class="integration-heading">{{type|titlecase}}</div>
      <!--type = Fulfillment Platforms, Text Channels, Voice Channels, Chat Agent plateform, monitoring-->
      <div *ngFor="let integration_item of type|integrationItemForType" class="mb-3">
        <!--key  = facebook, skype, imiconnect etc-->
        <div
          [id]="integration_item.key"
          requiredIfOneFilledValidator
          ngModelGroup="{{integration_item.key}}"
          class="border px-3">
          <div class="d-flex justify-content-center align-items-center" style="height: 90px">
            <img
              style="height: 24px; width: 24px"
              [src]="getLogo(integration_item.key)"
              alt="">
            <div class="heading my-0 mx-2">{{integration_item.unique_name}}</div>
            <mat-slide-toggle color="primary" [checked]="false" [(ngModel)]="formValueFinal[integration_type][integration_item.key]['enabled']" name="enabled">
            </mat-slide-toggle>
          </div>
          <div [hidden]="!formValueFinal[integration_type][integration_item.key]['enabled']">
            <div
              *ngFor="let integration_input_keys of formValue[integration_type][integration_item.key]|integrationInputKeysFilter">

              <mat-form-field style="width: 100%">
                <input matInput ngModel placeholder="{{integration_input_keys|displayNameForKeyIntegration}}" [name]="integration_input_keys">
              </mat-form-field>
            </div>
          </div>
        </div>

      </div>
    </div>


  </div>
</form>
